---
layout: post
title: "JavaScript权威指南 读书笔记-B"
categories: javascript
description: JavaScript权威指南读书笔记
tags: javascript
---

* content
{:toc}

全书的第一编：JavaScript语言核心

第4章：表达式和运算符

第5章：语句



### 4 表达式和运算符

- 表达式就是一个可以求值的短语

#### 4.1 原始表达式

- 表达式的最小单位，直接量，关键字和变量等

- 不存在的变量求值会返回undefined

#### 4.2 对象和数组的初始化表达式

- 也称对象直接量和数组直接量，不是原始表达式

#### 4.3 函数定义表达式

- 可以称为是函数直接量，关键字function加上一对圆括号，在家花括号的函数体

```
var suqare = function(x) { return x * x; }
```

#### 4.4 属性访问表达式

- 两种写法，推荐使用方括号

![](http://ww1.sinaimg.cn/large/8d6a2535gw1f8yqlb5c6qj206y01l746.jpg)

#### 4.5 调用表达式

- 函数调用的表达式

```
f(o)
Math.max(x,y,z)
a.sort()
```

#### 4.6 对象创建表达式

- 创建一个对象并调用一个函数，即构造函数

```
new Object()
new Point(2,3)
```

#### 4.7 运算符概述

- 有些运算符是关键字表示的，比如delete和instanceof，和符号一样，都是正规运算符

![](http://ww1.sinaimg.cn/large/8d6a2535gw1f8yr20niznj20fx0nl424.jpg)

##### 4.7.1 操作数的个数

- 一元二元三元运算符的分类就是

##### 4.7.2 操作数类型和结果类型

- 运算符会对操作数的类型进行自动转换

##### 4.7.3 左值

- 意思是表达式只能出现在运算符左侧

##### 4.7.4 运算符的副作用

- 例子就是赋值运算符的副作用，会对值有影响，自增自减是隐式赋值

##### 4.7.5 运算符优先级

- 憋缩话，用括号

##### 4.7.6 运算符的结合性

- 左结合和右结合，跟着感觉走

##### 4.7.7 运算顺序

- 如果子表达式的运算顺序会影响整个表达式，我觉得还是分成几个语句好了

```
a = 1;
1 in data;
2 in data;
b
// 左操作数表示索引，0,1,2存在，3不存在 = (a++)+a; => b is 3
```

##### 4.9.4 instanceof运算符



#### 4.8 算术表达式

- 加减乘除

##### 4.8.1 + 运算符

- 既可以做加法，也可以做字符串连接

##### 4.8.2 一元算术运算符

- 一元加法，一元减法，递增递减

##### 4.8.3 位运算符

- 按位的与或逻辑运算等等

#### 4.9 关系表达式

##### 4.9.1 相等和不等运算符

##### 4.9.2 比较运算符

##### 4.9.3 in运算符

- 左操作数是一个字符串，右操作数是一个对象，返回布尔值

```
var point = { x:1, y;2};
"x" in point; => true
"z" in point; => false，不存在这个属性
"toString" in point; => true,有这个方法

 var data = [7,8,9];
 "0" in data;
 1 in data;
 2 in data;
 // 左操作数表示索引，0,1,2存在，3不存在
```

##### 4.9.4 instanceof运算符

- 左操作数是一个对象，右操作数标识对象的一个类

- 也会包含父类的检测

#### 4.10 逻辑表达式

- 逻辑运算符进行布尔运算，&&，||， ！

##### 4.10.1 逻辑与&&

##### 4.10.2 逻辑或||

##### 4.10.3 逻辑非！

#### 4.11 赋值表达式

- 左值是变量或者对象属性，右操作数是任意类型的任意值

- 值就是右操作数的值， 

#### 4.12 表达式计算

- 全局函数eval()

##### 4.12.1 eval()

##### 4.12.2 全局eval()

##### 4.12.3 严格eval()

#### 4.13 其他运算符

##### 4.13.1 条件运算符（?:）

##### 4.13.2 typeof运算符

- 任意值在typeof运算后的返回值

![](http://ww3.sinaimg.cn/large/8d6a2535gw1f8yseyk959j20j50atjsl.jpg)

##### 4.13.3 delete运算符

- delete是一元运算符，用来删除对象属性或者数组元素，删除是这个运算符的副作用

##### 4.13.4 void运算符

- 出现在操作数之前，可以是任意操作数，忽略计算结果，返回undefine

##### 4.13.5 逗号运算符 ，

- 二元运算符，先计算左操作数，后计算右操作数

```
i=0,j=1,k=2;
```

### 5 语句

- 语句就是以分号结束的表达式，带有副作用的表达式，比如赋值和函数调用

- 改变执行顺序的语句接控制结构

  - 条件语句，if，switch
  - 循环语句，重复执行的，while和for
  - 跳转语句，跳转其他地方执行，break，return，throw

#### 5.1 表达式语句

- 赋值语句
- 递增递减
- 删除变量delete
- 函数调用

#### 5.2 复合语句和空语句

- 复合语句就是用花括号将多条语句括起来就好

- 语句块的注意点
  
  - 语句块的结尾不需要分号
  - 语句块中的行都有锁紧，但不是必须
  - 注意js没有块级作用域，所以语句块中的变量不是私有的

- 空语句就是一个分号

#### 5.3 声明语句

- var和function分别定义变量和函数。这些语句定义标识符并赋值，声明语句本身什么也不做，但是通过创建变量和函数，可以更好地组织代码的语义

##### 5.3.1 var

- var用来声明一个或者多个变量

##### 5.3.2 function

- 定义函数，有两种定义的写法

```
var f = function(x) {
  return x + 1;
}

function f(x) {
  return x + 1;
}
```

- 函数声明可以在最顶层，也可以嵌套在其它函数内，但在嵌套的时候，只能出现在所嵌套函数的最顶部，也就是说不能出现在

- 函数声明也是提前的，在整个函数和脚本内都是可见的，函数的声明和函数体都是提前的

- 和var语句一样，创建的函数变量是无法删除的，但是可以更改，重新定义一个函数

#### 5.4 条件语句

- 控制语句，选择执行路径

##### 5.4.1 if

- if else的匹配规则是if会匹配最近的else，明确的办法就是加上花括号

##### 5.4.2 else if

- else if 并不是真正的js语句，而是一种惯用的写法

##### 5.4.3 switch

- 多重分支的情况，其中case的比较是使用===运算符比较的

#### 5.5 循环

- 4种循环语句；while do/while for for/in

##### 5.5.1 while

- 和C java的while一个意思

##### 5.5.2 do/while

- 执行一次再判断，没什么特别

##### 5.5.3 for

- 就是for，对的，就是for

##### 5.5.4 for/in

- 	和常规的for是完全不同的一类循环，可以循环遍历对象内的变量

	- 遍历对象属性成员

```
for(var p in o)
	console.log(o[p]);
```

- variable 可以是一个表达式，这样子每次给的变量都不同

```
var o = {x:1, y:2, z:3};
var a = [], i = 0;
for(a[i++] in o) /* empty */;
```

- 数组是特殊的对象，其实更方便

```
for (i in a) console.log(i);
```

- 枚举的顺序是按照属性出现的顺序

#### 5.6 跳转

- 程序跳转到某个位置，使用break，continue，可以带有标签

- return是跳出函数体的执行，并返回调用的返回值

- throw是抛出一个异常，try catch finally一起使用，异常会找到最近的闭合异常处理程序

##### 5.6.1 标签语句

- 语句可以添加标签，前面是标识符和冒号组成的

- 定义和使用标签

```
mainloop: while(token != null) {
	// code here
	continue mainloop; // jump into next loop
	// code here
}
```

##### 5.6.2 break 语句

- 退出内层循环或者switch语句

- break后面也可以添加标签，跳转到标签处

##### 5.6.3 continue 语句

- 转而执行下一次循环，同样可以带标签

- 只能在循环体内使用，不然会报错

- 所谓执行下一次循环，怎么执行下一次循环，也是有区别和门道的

	- while 中，会调到一开始，检测条件是否成立
	- do/while 里面，会调到结尾，判断条件是不是成立才会继续
	- for 中，**首先计算第三个自增表达式，然后再次检测test，判断是不是执行**
	- for/in 里面，循环开始遍历下一个属性

##### 5.6.4 return 语句

- 就是返回呗，可以有也可以没有返回值

##### 5.6.5 throw 语句

- 抛出异常的方式和Java一样

```
function factorial(x) {
	if (x < 0) throw new Error("x cannot be negative");

	for (var f = 1; x > 1; f *= x, x--);
	return f;
}
```

- 异常会一层层向上寻找trycatch，也即是异常处理程序，如果一直没有就会最终报告给用户

##### 5.6.6 try/catch/finally 语句

- 异常处理，try 包裹代码，catch负责处理异常， finally作出最后的清理

- try 块之内的异常抛出，要么是throw语句抛出，要么是调用一个方法间接抛出

- catch 块里的代码要有异常才会有机会执行

- finally 总会被执行

#### 5.7 其他语句类型

- 还有三种JS语句，width，debugger和use strict

##### 5.7.1 with 语句

- 用于临时扩展作用域链

##### 5.7.2 debugger 语句

- 调试模式什么的

##### 5.7.3 use strict

- 严格模式

#### 5.8 JS语句小结

- 每种语句的用法

![](http://ww3.sinaimg.cn/large/8d6a2535jw1f8z2j3qtq7j20g1050aai.jpg)

![](http://ww1.sinaimg.cn/large/8d6a2535jw1f8z2k3pl6bj20g60faacc.jpg)