---
layout: post
title: "JavaScript权威指南 读书笔记-A"
categories: javascript
description: JavaScript权威指南读书笔记
tags: javascript
---

* content
{:toc}

全书的第一编：JavaScript语言核心

第2章： js语言核心

第3章：类型，值和变量




### 2 词法结构

- 什么是词法结构？
  
  词法结构就是编程语言的一套基础性规则，描述怎么使用这门语言来编写程序。诸如，变量名什么样子，注释怎么写，语句怎么分隔等等基础规则。

#### 2.1 字符集

- Unicode字符集

##### 2.1.1 区分大小写

- 所有的标识符都是小写

- js是大小写敏感的

##### 2.1.2 空格，换行，格式控制

- js会忽略空格，所以风格随意

- 变量名字中间不能使用空格

##### 2.1.3 Unicode转义 

- 使用\u加上4个十六进制数字，和字符等价

```
"cafe" === "caf\u00e9" // => true
```

##### 2.1.4 标准化

- 现在基本都是Unicode，不会转ASCII了

#### 2.2 注释

- 两种风格，单行，多行

```
// 单行注释

/**
 * 多行注释
 */
```

#### 2.3 直接量

- 直接量就是程序中直接使用的数据值

```
12 数字
1.2 小数
"hello world" 字符串
'Hi' 字符串
true 布尔真
false 布尔假
/javascript/gi 正则表达式
null 空
```

- 对象和数组的直接量  

```
{x:1, y:2} 对象
[1,2,3,4,5] 数组
```

#### 2.4 标识符和保留字

- 标识符就是一个名字，对变量和函数进行命名，可以出现数字字母和下划线美元符号

- 保留字即是关键字，基本上就是js用过的东西需要小心的标识符不要使用

  - 现有的关键字，if while之类的
  - 当前版本没有用但是保留的，class const snum
  - 严格模式下做了限制，但是不完全是保留字的， atguments eval
  - Java所有的关键字都是保留字
  - 全局的变量和函数

#### 2.5 可选的分号

- 使用分号分隔语句

- 总结下来，第一，不要省略分号，第二，风格最好一致并良好，第三，小心一点，别装逼

### 3 类型 值 变量

- 类型分类；原始类型和对象类型

- 特殊原始值：null 和 undefined，表示自己特殊类型值的唯一成员

- 对象是属性的集合，有一些特殊的全局对象

- 普通对象是哈希表，有序的就是数组

- 特殊对象：函数，有关联代码的对象，调用函数返回结果

- 引用变量是无类型的

#### 3.1 数字

- 不区分浮点数和整数，都是浮点数

- 负数前的负号是一元运算，不是直接量的一部分

##### 3.1.1 整型直接量

- 十进制，十六进制，八进制直接量

```
0
1
1000000 十进制
0xff 十六进制
0xCAFE911 十六进制
0377 八进制
```

##### 3.1.2 浮点型直接量

- 传统实数写法，整数部分+小数点+小数部分

- 指数计数法也可以使用，实数后面加上字母e或者E再加正负号再加整数

```
[digits][.digits][(E|e)[(+|-)]digits]

3.12
2345.678
.33333333333
6.02e23
1.4732334E-32
```

##### 3.1.3 JS中的算术运算

- 加减乘除的运算符，还有取余运算

- 数学运算，对象Math，有很多可用的数学函数

```
Math.pow(2, 53);
Math.sqrt(3);
```

- 数字溢出，上溢出返回，正数返回正的无穷大来表示，负数返回负的无穷大表示

```
+infinity
-infinity
```

- 下溢出返回0，正数返回正0，负数返回负0

- 被零整除JS不报错，返回无穷大或者负无穷大

- 零除以零返回非数字NaN，NotANumber，没什么意义的数字操作都返回NaN

##### 3.1.4 二进制浮点数和四舍五入错误

- 不说话，上代码

```
var x = .3 - .2;
var y = .2 - .1;
x == y; 输出false！！！
x == .1; false
y == .1; true
```
  
  使用二进制浮点数进行计算的编程语言都会有这个问题，不知道解决没有

  使用大整数进行计算

##### 3.1.5 日期和时间

- Date()构造函数，创建日期和时间的对象

#### 3.2 文本

- 字符串不可变，Unicode编码

- js中没有字符类型

##### 3.2.1 字符串直接量

- 字符串直接量必须写在一行

```
"testing"
"pi is the ratio of a circle's circumstance to its diameter"
```

- 字符串中间使用转义字符换行

```
"two\nlines"
"one\
long\
line"
```

##### 3.2.2 转义字符

- 反斜线\ 加上一些东西表示转义

##### 3.2.3 字符串的使用

- 内置功能，字符串连接，使用+号连接

- 字符串有很多内置方法

```
greeting = "aaaaa" + "asd";
s.indexOf("1");
```

- 字符串是不可变的，函数返回的是新的字符串
- 字符串可以当做只读数组使用charAt方法或者[]索引引用

##### 3.2.4 模式匹配

- 构造函数RegExp()，创建正则对象
- 直接使用正则

```
var text = "testing: 1, 2, 3".
var pattern = /\d+/g
pattern.test(text);
```

#### 3.3 布尔值

- 这个诶啥说的，真假truefalse，判断，条件逻辑

#### 3.4 null和undefined

- null本身是表示非对象，但是typeof之后返回的是object，比较特殊
- undefine表示是值的空缺，没有初始化。是预定义的全局变量

#### 3.5 全局对象

- 全局定义的负号，可以直接使用，解释器启动的时候就会被创建
  - 全局属性，undefine，infinity，NaN
  - 全局函数，isNaN()等
  - 构造函数， Date等
  - 全局对象，Math，JSON

- 浏览器中的所有的js中，Window对象相当于全局对象，有一个属性window引用自身

- 全局对象也包含了程序员自己定义的全局值，如果代码声明了一个全局变量，那么这个就是全局对象的一个属性。

#### 3.6 包装对象

- 就是包装器，String Number Boolean

```
var s = "test", n = 1, b = true;
var S = new String(s);
var N = new Number(n);
var B = new Boolean(b);
```

#### 3.7 不可变的原始值和可变的对象引用

- 原始值：undefined，null，布尔值，数字，字符串

- 对象的值时可以修改的

- 基本类型和引用类型

#### 3.8 类型转换

- 字符串转成数字，没有意义的还会返回NaN

![类型转换表](http://ww3.sinaimg.cn/large/8d6a2535gw1f8ypgxpaltj20k40ez76u.jpg)

##### 3.8.1 转换和相等性

##### 3.8.2 显式类型转换

- 使用包装器执行类型转换

##### 3.8.3 对象转换为原始值

- 布尔值的话，所有对象转换成true

#### 3.9 变量声明

- 使用var声明变量

- 重复声明合法且无害

#### 3.10 变量作用域

- 局部变量优先级高于全局变量

##### 3.10.1 函数作用域和声明提前

- 函数体内的嵌套语句，内部使用的变量也是有作用域的

```
function test(0) {
  var i = 0;
  if (typeof o == "object") {
    var j = 0;
    for (var k = 0; k < 10; k++) {
      console.log(k);
    }
    console.log(k);
  }
  console.log(j);
}
// ijk都是有定义的，但是j可能没有初始化
```

- 函数作用域是说，函数内声明的所有变量在函数体内始终课件。甚至在声明之前，已经是可用的

- 所有的变量声明在引擎的预编译阶段被提前到文件顶部，同意声明，但是没有初始化赋值

- 没有块级作用域，花括号本身并不代表作用域，最小单位是函数作用域

##### 3.10.2 作为属性的变量

##### 3。10.3 作用域链

- 作用域链是一个对象列表或者链表，一步步一级级查找变量的定义，如果没有定义，就会抛出引用错误

